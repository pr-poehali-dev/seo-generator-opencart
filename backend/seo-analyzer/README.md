# SEO Analyzer API

Бэкенд-функция для анализа SEO-контента с использованием русскоязычных источников.

## Возможности

### 1. Анализ страницы товара
Парсит страницу конкретного товара и извлекает:
- Название товара (из H1 или title)
- Бренд (через JSON-данные или паттерны)
- Цену
- Описание (из meta description или блока описания)
- Характеристики из таблицы (до 15 позиций)

**Запрос:**
```json
{
  "type": "product",
  "productUrl": "https://example.com/product/smartphone"
}
```

**Ответ:**
```json
{
  "type": "product",
  "product_name": "Смартфон Apple iPhone 15 128GB Black",
  "brand": "Apple",
  "extracted_data": "Название: Смартфон Apple iPhone 15...\nБренд: Apple\nЦена: 79990 ₽\n\nОписание:\n...\n\nХарактеристики:\n...",
  "raw_data": {
    "title": "iPhone 15 - купить",
    "h1": "Смартфон Apple iPhone 15",
    "brand": "Apple",
    "price": "79990 ₽",
    "specs_count": 12
  },
  "source": "page_analysis"
}
```

### 2. Поиск информации о брендах
Извлекает актуальную информацию о бренде из русскоязычной Википедии.

**Запрос:**
```json
{
  "type": "brand",
  "brandName": "Sony"
}
```

**Ответ:**
```json
{
  "type": "brand",
  "brandInfo": "Sony Corporation — японская транснациональная корпорация...",
  "source": "Wikipedia (ru)"
}
```

### 3. Анализ категории товаров
Парсит страницу категории реального интернет-магазина и извлекает:
- Бренды товаров
- Популярные ключевые слова
- Количество товаров
- SEO-оптимизированное описание категории

**Запрос:**
```json
{
  "type": "category",
  "categoryUrl": "https://example.com/category/smartphones",
  "categoryName": "Смартфоны"
}
```

**Ответ:**
```json
{
  "type": "category",
  "description": "В категории Смартфоны представлено 150 товаров. Популярные бренды: Apple, Samsung, Xiaomi...",
  "analysis": {
    "brands": ["Apple", "Samsung", "Xiaomi"],
    "keywords": ["смартфон", "телефон", "камера"],
    "total_products": 150,
    "page_title": "Смартфоны - купить в интернет-магазине",
    "h1": "Смартфоны"
  },
  "source": "page_analysis"
}
```

## Как работает анализ категории

1. **Парсинг HTML** - извлекает структуру страницы
2. **Поиск брендов** - находит названия брендов через регулярные выражения и JSON-данные
3. **Анализ ключевых слов** - подсчитывает частоту русских слов (исключая стоп-слова)
4. **Оценка товаров** - определяет количество по ценам и элементам на странице
5. **Генерация описания** - создает SEO-текст с реальными данными о категории

## Интеграция во frontend

```typescript
// Поиск информации о бренде
const response = await fetch(FUNCTION_URL, {
  method: 'POST',
  headers: { 'Content-Type': 'application/json' },
  body: JSON.stringify({ 
    type: 'brand', 
    brandName: 'Sony' 
  })
});

// Анализ категории
const response = await fetch(FUNCTION_URL, {
  method: 'POST',
  headers: { 'Content-Type': 'application/json' },
  body: JSON.stringify({ 
    type: 'category', 
    categoryUrl: 'https://example.com/smartphones',
    categoryName: 'Смартфоны'
  })
});
```

## Особенности

- Работает с **динамическими сайтами** (извлекает данные из HTML, даже если контент загружается через JS)
- Поддерживает **русскоязычные** источники и ключевые слова
- Использует **регулярные выражения** для поиска брендов (поддерживает 20+ популярных брендов)
- Оценивает количество товаров через **анализ цен** на странице
- **Фильтрует стоп-слова** для извлечения релевантных ключевых запросов
- **Timeout 15 секунд** для парсинга страниц

## Ограничения

- Не работает с сайтами, полностью загружающими контент через JavaScript (требуется рендеринг)
- Анализирует только HTML-структуру (не выполняет JavaScript)
- Максимум 20 товаров и 10 брендов в результате анализа